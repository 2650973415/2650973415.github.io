
<!DOCTYPE html>
<html>
<head>
<title>Mysql操作汇总</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h1>Mysql操作汇总</h1>
<p><strong>数据库操作:</strong></p>
<pre><code>1. 登陆数据库：
（1）mysql -uroot -p;
（2）mysql -h localhost -uroot -p; 

2. 查看所有数据库：
show databases;

3.  创建数据库：
create database if not emists 数据库名 character set utf8；

4. 查看数据库定义（表结构）：
（1）show create database 数据库名；
（2）desc 表名；   
（3）describe 表名；

5.  选择数据库：
use 数据库名；

6. 删除数据库：
drop database 数据库名； 

7. 查看所有表：
show tables；

8. 创建表：
create table 表名(
    字段1 数据类型 约束 默认值 comment '注释'，
    字段2 数据类型 约束 默认值 comment '注释'
)engine=INNODB  auto_increment=自增开始值  default charset=utf8；

9.  删除表：
（1）drop table 表名；
（2）drop table if exists 表名；（判断表是否存在）

10. 向表添加数据：7
insert into 表名(字段1，字段2…字段n) values(‘字段1值’,’字段2值’…‘字段n值’)；

11. 查看表数据：
select * from 表名；

12.  删除表数据：
delete from 表名；

13.  查看所有储存引擎：
show engines；

14.  查看默认储存引擎：
show variables like ‘storage_engine’；

15. 清除表数据：
truncate table 表名 ；

16. 删除数据库：
Drop database 数据库名；
</code></pre>

<p><strong>select查询:</strong></p>
<pre><code>1. 查看表数据：
select * from 表名；

2. 多字段查询：
Select 字段1，字段2.。。 From 表明；

3.  定位查询：
Select * from 表明 where 条件；
!= &lt;&gt;  =   &lt;=  &gt;=   &gt;  &lt;

4. 多条件查询：
And  or
（1）Select * from 表明 where 条件一 and 条件二；
（2）Select * from 表明 where 条件一 or 条件二；
（3）Select * from 表明 where 字段 between 值  and 值；
（4）Select* from 表明 where 字段 in（值，值。。。）；

5. 模糊查询：
（1）Select * from 表明 where 字段  like ‘%’;
（2）Select * from 表明 where 字段 like ‘_’
% 表示任意字符0---
_ 表示一个字符

6. 空值查询：
（1）Select * from 表明 where 字段 is null；
（2）Select * from 表明 where 字段 not is null；
（3）Select ifnull(字段，默认值) from 表；

7.  查询结果不重复：
Select distinct 字段名  from  表明

8. 排序：
Select * from 表明 order by 字段 排序方式(ASC, DESC);

9.  分组：
（1）Select * from 表明 group by 字段  having 条件；
（2）Select * from 表明group by 字段 with rollup；

10.  限制查询结果数量：
Select * from 表明 limit 开始条数，条数；
</code></pre>

<p><strong>alert修改:</strong></p>
<pre><code>1. 修改表名：
alter table 旧表名 rename to 新表名；
alert table 旧表名 rename 新表名；

2. 修改字段的数据类型：
alter table 表名 modify 字段名 数据类型；

3.  修改字段名：
alter table 表名 change 旧字段名 新字段名 新数据类型；

4. 修改数据库字符集：
alter database 数据库名 character set utf8;
5. 修改表字符集：
alter table 表名 convert to character set utf8;

6. 修改字段字符集：
alter table 表名 modify column '字段名' varchar(30) character set gbk not null;

7. 修改字段的排列位置：
alter table 表名 modify 字段1 数据类型 first | after 字段2；

8. 添加字段
alter table 表名 add 新字段名 数据类型 约束条件 first | after 已存在的字段名；

9. 添加主键：
alter table [表名] add primary key ([字段名])

10. 添加外键：
alter table 外表名 add constraint fk_名称 foreign key(外列) references 主表名(主列) 

11. 级联外键：
alter table 外表名 add constraint fk_名称 foreign key(外列) references 主表名(主列) on delete cascade on update cascade;

12. 删除字段：
alter table 表名 drop 字段名；

13. 更改表./的存储引擎：
alter table 表名 engine=更改后的存储引擎名；

14. 删除表外键约束：
alter table 表名 drop foreign key 外键约束名

15. 删除主键：
alter table 表名 drop primary key;
</code></pre>

<p><strong>复制表:</strong></p>
<pre><code>1. 复制表结构及数据到新表
CREATE TABLE 新表 SELECT * FROM 旧表 
注：这种方法会将oldtable中所有的内容都拷贝过来，当然我们可以用delete from newtable;来删除。 
注：不过这种方法的一个最不好的地方就是新表中没有了旧表的primary key、Extra（auto_increment）等属性。需要自己用&amp;quot;alter&amp;quot;添加，而且容易搞错。 


2. 只复制表结构到新表 
（1）CREATE TABLE 新表 SELECT * FROM 旧表 WHERE 1=2 
（2）CREATE TABLE 新表  LIKE 旧表 


3. 复制旧表的数据到新表(假设两个表结构一样) 
INSERT INTO 新表 SELECT * FROM 旧表 


4. 复制旧表的数据到新表(假设两个表结构不一样) 
INSERT INTO 新表(字段1,字段2,.......) SELECT 字段1,字段2,...... FROM 旧表 


5. 可以将表1结构复制到表2 
SELECT * INTO 表2 FROM 表1 WHERE 1=2 

6. 可以将表1内容全部复制到表2 
SELECT * INTO 表2 FROM 表1 

7. show create table 旧表; 
这样会将旧表的创建命令列出。我们只需要将该命令拷贝出来，更改table的名字，就可以建立一个完全一样的表 
</code></pre>

<p><strong>更新/删除数据:</strong></p>
<pre><code>1. 更新数据：
update 表名 set 字段1=值1，字段2=值2 where 指定条件

2.  删除数据：
delete from 表名 where 制定条件

3. 级联删除：
需添加外键：alter table 外表名 add constraint fk_名称 foreign key(外列) references 主表名(主列) on delete cascade on update cascade

4. 清除表数据
Delete from 表名;
truncate table 表名;
区别：truncate语句要比 delete 语句快。因为 truncate 删除了表，然后根据表结构重新建立它，而 delete 删除的是记录，并没有尝试去修改表。这也是为什么当向一个使用 delete 清空的表插入数据时，MySQL 会记住前面产生的AUTOINCREMENT序列，并且继续利用它对AUTOINCREMENT字段编号。而truncate删除表后，表是从1开始为autoincrement字段编号。
</code></pre>


</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
